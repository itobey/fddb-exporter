/*
 * FDDB Exporter - Modern Dark Theme
 * Accent: #4e619b
 *
 * Note: This stylesheet uses Vaadin Web Components (custom elements with vaadin-* prefix)
 * and Lumo design system variables. Lumo is Vaadin's theming system.
 * IDE warnings about "unknown elements" for vaadin-* selectors are expected and can be ignored.
 * These are valid Web Component selectors that work at runtime.
 */

/* ============================================
   CSS Custom Properties & Lumo Overrides
   ============================================ */
html {
    /* Accent color */
    --accent: #4e619b;
    --accent-hover: #5d72b3;
    --accent-active: #3f4e7d;
    --accent-contrast: #ffffff;

    /* Override Lumo primary color with accent */
    --lumo-primary-color: var(--accent);
    --lumo-primary-color-50pct: rgba(78, 97, 155, 0.5);
    --lumo-primary-color-10pct: rgba(78, 97, 155, 0.1);
    --lumo-primary-text-color: var(--accent-contrast);

    /* Deep dark backgrounds */
    --lumo-base-color: #0f0f11;
    --lumo-tint-5pct: rgba(255, 255, 255, 0.03);
    --lumo-tint-10pct: rgba(255, 255, 255, 0.05);
    --lumo-tint-20pct: rgba(255, 255, 255, 0.08);
    --lumo-tint-30pct: rgba(255, 255, 255, 0.12);
    --lumo-tint-40pct: rgba(255, 255, 255, 0.16);
    --lumo-tint-50pct: rgba(255, 255, 255, 0.2);
    --lumo-tint-60pct: rgba(255, 255, 255, 0.25);
    --lumo-tint-70pct: rgba(255, 255, 255, 0.3);
    --lumo-tint-80pct: rgba(255, 255, 255, 0.4);
    --lumo-tint-90pct: rgba(255, 255, 255, 0.5);
    --lumo-tint: #ffffff;

    --lumo-shade-5pct: rgba(0, 0, 0, 0.05);
    --lumo-shade-10pct: rgba(0, 0, 0, 0.1);
    --lumo-shade-20pct: rgba(0, 0, 0, 0.2);
    --lumo-shade-30pct: rgba(0, 0, 0, 0.3);
    --lumo-shade-40pct: rgba(0, 0, 0, 0.4);
    --lumo-shade-50pct: rgba(0, 0, 0, 0.5);
    --lumo-shade-60pct: rgba(0, 0, 0, 0.6);
    --lumo-shade-70pct: rgba(0, 0, 0, 0.7);
    --lumo-shade-80pct: rgba(0, 0, 0, 0.8);
    --lumo-shade-90pct: rgba(0, 0, 0, 0.9);
    --lumo-shade: #000000;

    /* Contrast colors for cards/surfaces */
    --lumo-contrast-5pct: rgba(255, 255, 255, 0.04);
    --lumo-contrast-10pct: rgba(255, 255, 255, 0.06);
    --lumo-contrast-20pct: rgba(255, 255, 255, 0.1);
    --lumo-contrast-30pct: rgba(255, 255, 255, 0.15);
    --lumo-contrast-40pct: rgba(255, 255, 255, 0.2);
    --lumo-contrast-50pct: rgba(255, 255, 255, 0.25);
    --lumo-contrast-60pct: rgba(255, 255, 255, 0.3);
    --lumo-contrast-70pct: rgba(255, 255, 255, 0.4);
    --lumo-contrast-80pct: rgba(255, 255, 255, 0.5);
    --lumo-contrast-90pct: rgba(255, 255, 255, 0.7);
    --lumo-contrast: #ffffff;

    /* Body text color */
    --lumo-body-text-color: rgba(255, 255, 255, 0.87);
    --lumo-secondary-text-color: rgba(255, 255, 255, 0.6);
    --lumo-tertiary-text-color: rgba(255, 255, 255, 0.4);
    --lumo-disabled-text-color: rgba(255, 255, 255, 0.35);

    /* Headers and surfaces */
    --lumo-header-text-color: rgba(255, 255, 255, 0.95);

    /* Flat shadows - minimal elevation */
    --lumo-box-shadow-xs: 0 1px 2px rgba(0, 0, 0, 0.3);
    --lumo-box-shadow-s: 0 1px 3px rgba(0, 0, 0, 0.35), 0 1px 2px rgba(0, 0, 0, 0.2);
    --lumo-box-shadow-m: 0 2px 6px rgba(0, 0, 0, 0.4), 0 1px 3px rgba(0, 0, 0, 0.25);
    --lumo-box-shadow-l: 0 4px 12px rgba(0, 0, 0, 0.45), 0 2px 6px rgba(0, 0, 0, 0.3);
    --lumo-box-shadow-xl: 0 8px 24px rgba(0, 0, 0, 0.5), 0 4px 12px rgba(0, 0, 0, 0.35);

    /* Border radius - flat design */
    --lumo-border-radius-s: 4px;
    --lumo-border-radius-m: 6px;
    --lumo-border-radius-l: 8px;

    /* Spacing scale - 8px base */
    --lumo-space-xs: 4px;
    --lumo-space-s: 8px;
    --lumo-space-m: 16px;
    --lumo-space-l: 24px;
    --lumo-space-xl: 32px;

    /* Card surface color */
    --card-surface: rgba(255, 255, 255, 0.06);
    --card-border: rgba(255, 255, 255, 0.1);
    --card-hover-surface: rgba(255, 255, 255, 0.08);

    /* Transition timing */
    --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
    --transition-normal: 180ms cubic-bezier(0.4, 0, 0.2, 1);
    --transition-slow: 250ms cubic-bezier(0.4, 0, 0.2, 1);

    /* Mobile horizontal padding - used to keep consistent spacing between cards and viewport edges */
    --mobile-horizontal-padding: 0.5rem;
}

/* ============================================
   Typography
   ============================================ */
body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica', 'Arial', sans-serif;
    font-weight: 400;
    line-height: 1.5;
    color: var(--lumo-body-text-color);
    background-color: var(--lumo-base-color);
}

h1, h2, h3, h4, h5, h6 {
    color: var(--lumo-header-text-color);
    font-weight: 600;
    line-height: 1.3;
}

/* ============================================
   App Header
   ============================================ */
.app-header {
    background: rgba(255, 255, 255, 0.04);
    border-bottom: 1px solid rgba(255, 255, 255, 0.08);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
}

.app-title {
    font-size: clamp(1rem, 5vw, 1.5rem);
    font-weight: 600;
    color: var(--lumo-header-text-color);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* ============================================
   Drawer / Side Navigation
   ============================================ */
vaadin-side-nav-item {
    --_lumo-item-selected-background: rgba(78, 97, 155, 0.15);
    border-radius: var(--lumo-border-radius-m);
    margin: 2px 0;
    transition: background-color var(--transition-fast);
}

vaadin-side-nav-item::part(link) {
    border-radius: var(--lumo-border-radius-m);
    padding: 8px 12px;
}

vaadin-side-nav-item:hover {
    background-color: rgba(255, 255, 255, 0.06);
}

vaadin-side-nav-item[selected] {
    background: var(--_lumo-item-selected-background);
    border-left: 4px solid var(--accent);
    padding-left: 8px;
}

vaadin-side-nav-item[selected]::part(link) {
    color: var(--accent-contrast);
    font-weight: 500;
}

/* ============================================
   Cards Grid
   ============================================ */
.cards-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    gap: 16px;
    width: 100%;
}

/* Responsive breakpoints */
@media (max-width: 600px) {
    .cards-grid {
        grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
        gap: 12px;
    }
}

@media (min-width: 1200px) {
    .cards-grid {
        gap: 20px;
    }
}

/* ============================================
   Card Component
   ============================================ */
.card {
    background: var(--card-surface);
    border: 1px solid var(--card-border);
    border-radius: var(--lumo-border-radius-l);
    padding: 16px;
    transition: transform var(--transition-normal),
    box-shadow var(--transition-normal),
    background-color var(--transition-fast);
    box-shadow: var(--lumo-box-shadow-xs);
    box-sizing: border-box;
}

.card:hover {
    transform: translateY(-4px);
    box-shadow: var(--lumo-box-shadow-m);
    background: var(--card-hover-surface);
}

/* Highlighted card (for highest values) */
.card--highlight {
    cursor: pointer;
}

.card--highlight:hover {
    transform: translateY(-6px);
    box-shadow: 0 6px 16px rgba(78, 97, 155, 0.3),
    0 2px 8px rgba(0, 0, 0, 0.4);
}

.card--highlight .card__value {
    color: var(--accent-hover);
}

/* ============================================
   Buttons
   ============================================ */
vaadin-button[theme~="primary"] {
    background: var(--accent);
    color: var(--accent-contrast);
    border-radius: var(--lumo-border-radius-m);
    font-weight: 500;
    transition: background-color var(--transition-fast),
    transform var(--transition-fast);
    box-shadow: var(--lumo-box-shadow-xs);
}

vaadin-button[theme~="primary"]:hover {
    background: var(--accent-hover);
    transform: translateY(-1px);
    box-shadow: var(--lumo-box-shadow-s);
}

vaadin-button[theme~="primary"]:active {
    background: var(--accent-active);
    transform: translateY(0);
    box-shadow: none;
}

vaadin-button {
    border-radius: var(--lumo-border-radius-m);
    transition: all var(--transition-fast);
}

/* ============================================
   Date Badges & Small Labels
   ============================================ */
.date-badge {
    display: inline-block;
    padding: 4px 10px;
    border-radius: 12px;
    background: rgba(78, 97, 155, 0.12);
    color: var(--lumo-body-text-color);
    font-size: 0.75rem;
    font-weight: 500;
    letter-spacing: 0.3px;
}

.label-small {
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    font-weight: 600;
    color: var(--lumo-secondary-text-color);
}

/* ============================================
   Form Elements
   ============================================ */
vaadin-text-field,
vaadin-text-area,
vaadin-date-picker,
vaadin-integer-field,
vaadin-select {
    --lumo-contrast-10pct: rgba(255, 255, 255, 0.08);
}

vaadin-text-field::part(input-field),
vaadin-text-area::part(input-field),
vaadin-date-picker::part(input-field),
vaadin-integer-field::part(input-field) {
    background: rgba(255, 255, 255, 0.04);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: var(--lumo-border-radius-m);
    transition: border-color var(--transition-fast),
    background-color var(--transition-fast);
}

vaadin-text-field:hover::part(input-field),
vaadin-text-area:hover::part(input-field),
vaadin-date-picker:hover::part(input-field),
vaadin-integer-field:hover::part(input-field) {
    background: rgba(255, 255, 255, 0.06);
    border-color: rgba(255, 255, 255, 0.15);
}

vaadin-text-field[focused]::part(input-field),
vaadin-text-area[focused]::part(input-field),
vaadin-date-picker[focused]::part(input-field),
vaadin-integer-field[focused]::part(input-field) {
    border-color: var(--accent);
    background: rgba(255, 255, 255, 0.08);
    box-shadow: 0 0 0 2px rgba(78, 97, 155, 0.2);
}

/* ============================================
   Notifications
   ============================================ */
vaadin-notification-card {
    display: inline-flex;
    align-items: center;
    width: auto !important;
    max-width: min(90vw, 640px);
    padding: 0 !important; /* removed padding for debugging */
    box-sizing: border-box;
    border-radius: var(--lumo-border-radius-l);
    box-shadow: none !important;
}

/* Prevent children from stretching to fill the notification's flex container */
vaadin-notification-card > * {
    flex: 0 0 auto !important;
}

vaadin-notification-card::before,
vaadin-notification-card::after {
    box-shadow: none !important;
}

vaadin-notification-card[theme~="success"] {
    background: rgba(76, 175, 80, 0.15);
    /* removed border-left to avoid extra colored bar */
    box-shadow: none !important;
}

vaadin-notification-card[theme~="error"] {
    background: rgba(244, 67, 54, 0.15);
    /* removed border-left to avoid extra colored bar */
    box-shadow: none !important;
}

vaadin-notification-card[theme~="warning"] {
    background: rgba(255, 152, 0, 0.15);
    /* removed border-left to avoid extra colored bar */
    box-shadow: none !important;
}

/* Remove any potential overlay shadows */
vaadin-notification-container {
    box-shadow: none !important;
}

vaadin-notification-card * {
    box-shadow: none !important;
}

/* ============================================
   Charts & Visualizations
   ============================================ */
.chart-container {
    background: var(--card-surface);
    border: 1px solid var(--card-border);
    border-radius: var(--lumo-border-radius-l);
    padding: 20px;
    box-shadow: var(--lumo-box-shadow-xs);
}

/* ============================================
   Utility Classes
   ============================================ */
.text-accent {
    color: var(--accent) !important;
}

.bg-accent {
    background-color: var(--accent) !important;
}

.bg-accent-subtle {
    background-color: rgba(78, 97, 155, 0.12) !important;
}

.border-accent {
    border-color: var(--accent) !important;
}

.surface-elevated {
    background: rgba(255, 255, 255, 0.08);
    border: 1px solid rgba(255, 255, 255, 0.12);
}

/* ============================================
   Accessibility - Reduced Motion
   ============================================ */
@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }

    .card:hover,
    .card--highlight:hover,
    vaadin-button:hover {
        transform: none !important;
    }
}

/* ============================================
   Scrollbar Styling
   ============================================ */
::-webkit-scrollbar {
    width: 10px;
    height: 10px;
}

::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.03);
}

::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.15);
    border-radius: 5px;
}

::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.25);
}

/* ============================================
   Drawer Styling
   ============================================ */
vaadin-app-layout::part(drawer) {
    /* Use solid background instead of transparent for better readability on mobile */
    background: var(--lumo-base-color);
    border-right: 1px solid rgba(255, 255, 255, 0.08);
    /* Ensure drawer has solid background on mobile */
    backdrop-filter: none;
}

/* ============================================
   Progress Bar & Loading States
   ============================================ */
vaadin-progress-bar {
    --lumo-primary-color: var(--accent);
}

vaadin-progress-bar::part(bar) {
    background: var(--accent);
}

/* ============================================
   Tables
   ============================================ */
vaadin-grid {
    border-radius: var(--lumo-border-radius-l);
    overflow: hidden;
}

vaadin-grid::part(cell) {
    background: rgba(255, 255, 255, 0.04);
}

vaadin-grid::part(row):hover {
    background: rgba(255, 255, 255, 0.06);
}

/* ============================================
   Tabs
   ============================================ */
vaadin-tabs {
    /* keep the selected color variable in case components read it */
    --_lumo-item-selected-color: var(--accent);
}

/* Default (unselected) tab text should be white */
vaadin-tab {
    color: #ffffff; /* white for inactive/unselected tabs */
}

/* Selected / active tab should use the primary text color */
vaadin-tab[selected],
vaadin-tab[active],
vaadin-tab.active {
    color: var(--lumo-primary-text-color) !important;
    border-bottom-color: var(--lumo-primary-text-color) !important;
}

/* ============================================
   Grid / Table Improvements for Mobile
   ============================================ */
vaadin-grid {
    /* Enable horizontal scrolling on mobile if needed */
    overflow-x: auto;
}

/* Allow text wrapping in grid cells for better mobile display */
vaadin-grid-cell-content {
    white-space: normal !important;
    word-wrap: break-word !important;
    overflow-wrap: break-word !important;
    line-height: 1.4;
}

/* ============================================
   Data Query View - Grid Sizing
   ============================================ */
/* Desktop: Limit grid height to prevent viewport overflow */
@media (min-width: 769px) {
    .data-query-view .data-query-grid {
        max-height: calc(100vh - 350px);
    }

    /* Make All Entries grid slightly shorter to avoid a tiny page scrollbar when count label changes */
    .data-query-view .all-entries-grid {
        /* reduce by 20px for safety */
        max-height: calc(100vh - 370px);
        overflow-y: auto;
    }

    /* Hide cards on desktop */
    .mobile-only {
        display: none !important;
    }
}

/* Mobile: Show cards instead of tables */
@media (max-width: 768px) {
    /* Hide grids on mobile */
    .desktop-only {
        display: none !important;
    }

    /* Show cards on mobile */
    .mobile-only {
        display: flex !important;
    }

    /* Card container styles */
    .cards-container {
        width: 100%;
        padding: 0.5rem;
    }

    /* Mobile data card styles */
    .mobile-data-card {
        width: 100%;
        box-sizing: border-box;
    }

    /* Ensure amount and date appear inline next to each other on mobile cards */
    .mobile-data-card .amount-date-row {
        display: inline-flex !important;
        align-items: center !important;
        gap: 8px !important;
        justify-content: flex-start !important;
        width: 100%;
    }

    .mobile-data-card .product-amount {
        display: inline-block !important;
        margin: 0 !important;
        color: var(--lumo-secondary-text-color) !important;
    }

    .mobile-data-card .product-date-badge {
        display: inline-block !important;
        margin-left: 4px !important;
        vertical-align: middle !important;
    }

    /* Enhanced hover effect for clickable cards */
    .mobile-data-card[style*="cursor: pointer"]:hover,
    .mobile-data-card:hover {
        background: var(--card-hover-surface) !important;
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15) !important;
    }

    /* Active/tap state for better mobile feedback */
    .mobile-data-card[style*="cursor: pointer"]:active,
    .mobile-data-card:active {
        transform: translateY(0);
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1) !important;
    }
}

/* Extra small devices (phones in portrait, less than 576px) */
@media (max-width: 576px) {
    /* Further reduce spacing - lower the variable so all uses adjust */
    :root {
        --mobile-horizontal-padding: 0.25rem;
    }

    .dashboard-view,
    .data-query-view,
    .rolling-averages-view,
    .data-export-view,
    .correlation-view,
    .migration-view {
        padding: var(--mobile-horizontal-padding) !important;
    }

    /* Stack all horizontal layouts */
    vaadin-horizontal-layout {
        flex-direction: column !important;
    }

    /* Keep our amount-date-row as a row even on the smallest screens */
    vaadin-horizontal-layout.amount-date-row,
    .mobile-data-card .amount-date-row {
        flex-direction: row !important;
        flex-wrap: nowrap !important;
        justify-content: flex-start !important;
        align-items: center !important;
        white-space: nowrap !important;
    }

    /* Full width buttons */
    vaadin-button {
        width: 100%;
        margin: 0.25rem 0;
    }

    /* Smaller cards */
    [class*="card"] {
        min-width: 100px !important;
        font-size: 0.875rem;
    }

    /* Grid - Show fewer columns */
    vaadin-grid::part(cell) {
        font-size: 0.75rem;
        padding: 0.25rem;
    }

    /* Better touch targets */
    vaadin-button,
    vaadin-tab,
    a {
        min-height: 44px;
        min-width: 44px;
    }

    /* Ensure the mobile-only yesterday box has no bottom margin on very small screens */
    .mobile-yesterday-box {
        margin-bottom: 0 !important;
    }
}

/* ============================================
   Mobile Spacing & Safe Areas
   ============================================ */
/* Add safe spacing on mobile to prevent content from touching edges */
@media (max-width: 768px) {
    /* Main content area */
    vaadin-app-layout [slot="drawer"] {
        padding: env(safe-area-inset-top, 0) env(safe-area-inset-right, 0) env(safe-area-inset-bottom, 0) env(safe-area-inset-left, 0);
    }

    /* Add minimum padding to all views on mobile */
    vaadin-vertical-layout:not([theme~="padding-false"]) {
        /* Use the shared mobile padding and respect safe-area insets */
        padding-left: max(var(--mobile-horizontal-padding), env(safe-area-inset-left, 0)) !important;
        padding-right: max(var(--mobile-horizontal-padding), env(safe-area-inset-right, 0)) !important;
        padding-top: max(0.5rem, env(safe-area-inset-top, 0.5rem)) !important;
        padding-bottom: max(0.5rem, env(safe-area-inset-bottom, 0.5rem)) !important;
    }

    /* Ensure H2 headings have spacing from edges */
    h2, h3 {
        padding-left: 0.25rem;
        padding-right: 0.25rem;
    }

    /* Ensure cards have spacing - use padding for symmetric spacing instead of asymmetric margins */
    .card, .cards-grid, .cards-container {
        padding-left: var(--mobile-horizontal-padding);
        padding-right: var(--mobile-horizontal-padding);
        margin-left: 0;
        margin-right: 0;
        box-sizing: border-box;
        max-width: 100vw;
        /* Remove max-height on mobile to show all entries without scrolling */
        max-height: none !important;
        min-height: 450px; /* Minimum height to fit ~10 items in landscape */
    }

    /* Add padding to search forms and buttons on mobile so they're not flush against edges */
    .data-query-tab-layout > vaadin-horizontal-layout,
    .data-query-tab-layout > vaadin-button {
        margin-left: var(--mobile-horizontal-padding);
        margin-right: var(--mobile-horizontal-padding);
    }

    /* Also ensure count labels have consistent margins */
    .data-query-tab-layout > span {
        margin-left: var(--mobile-horizontal-padding);
        margin-right: var(--mobile-horizontal-padding);
    }

    /* Remove padding from data query view tab content layouts on mobile */
    .data-query-view vaadin-tabsheet vaadin-scroller vaadin-vertical-layout {
        padding-left: 0 !important;
        padding-right: 0 !important;
    }
}

/* Extra small devices (phones in portrait, less than 576px) */
@media (max-width: 576px) {
    /* Further reduce spacing - lower the variable so all uses adjust */
    :root {
        --mobile-horizontal-padding: 0.25rem;
    }

    .dashboard-view,
    .data-query-view,
    .rolling-averages-view,
    .data-export-view,
    .correlation-view,
    .migration-view {
        padding: var(--mobile-horizontal-padding) !important;
    }

    /* Stack all horizontal layouts */
    vaadin-horizontal-layout {
        flex-direction: column !important;
    }

    /* Keep our amount-date-row as a row even on the smallest screens */
    vaadin-horizontal-layout.amount-date-row,
    .mobile-data-card .amount-date-row {
        flex-direction: row !important;
        flex-wrap: nowrap !important;
        justify-content: flex-start !important;
        align-items: center !important;
        white-space: nowrap !important;
    }

    /* Full width buttons */
    vaadin-button {
        width: 100%;
        margin: 0.25rem 0;
    }

    /* Smaller cards */
    [class*="card"] {
        min-width: 100px !important;
        font-size: 0.875rem;
    }

    /* Grid - Show fewer columns */
    vaadin-grid::part(cell) {
        font-size: 0.75rem;
        padding: 0.25rem;
    }

    /* Better touch targets */
    vaadin-button,
    vaadin-tab,
    a {
        min-height: 44px;
        min-width: 44px;
    }

    /* Ensure the mobile-only yesterday box has no bottom margin on very small screens */
    .mobile-yesterday-box {
        margin-bottom: 0 !important;
    }
}

/* ============================================
   Project-specific responsive tweaks
   ============================================ */

/* Compact preset buttons used in RollingAveragesView */
.preset-btn {
    padding: 0.45rem 0.7rem;
    font-size: 0.95rem;
    box-sizing: border-box;
}

/* Drawer header small padding tweak (MainLayout drawer header) */
.drawer-header {
    padding-left: 1rem !important;
    padding-right: 1rem !important;
    /* Top slightly smaller than bottom for visual balance when icon shown */
    padding-top: 0.75rem !important;
    padding-bottom: 1rem !important;
    display: flex;
    align-items: center;
}

/* Ensure the app icon in the drawer header is sized and spaced */
.drawer-header img {
    width: 32px;
    height: 32px;
    object-fit: contain;
    margin-right: 0.5rem;
}

/* Ensure the header text aligns vertically */
.drawer-header h3 {
    margin: 0;
    line-height: 1;
}

/* Data query view adjustments for mobile to remove asymmetric paddings/gaps */
@media (max-width: 600px) {
    /* Remove horizontal padding on data query view to allow full width */
    .data-query-view {
        padding-left: 0 !important;
        padding-right: 0 !important;
    }

    /* Remove horizontal padding on tab layout so content can reach viewport edges */
    .data-query-tab-layout {
        padding-left: 0 !important;
        padding-right: 0 !important;
    }

    /* Add symmetric padding to search form elements */
    .data-query-tab-layout .vaadin-horizontal-layout,
    .data-query-tab-layout .search-form {
        padding-left: 0.5rem !important;
        padding-right: 0.5rem !important;
        box-sizing: border-box;
    }

    /* Ensure the date picker and buttons can shrink and align evenly */
    .data-query-tab-layout vaadin-date-picker,
    .data-query-tab-layout vaadin-button,
    .data-query-tab-layout button {
        min-width: 0 !important;
    }

    /* Make preset buttons occupy 50% width (two per row) when used elsewhere */
    .preset-btn {
        flex: 1 1 calc(50% - 0.25rem) !important;
        min-width: 0 !important;
        max-width: 100% !important;
        font-size: 0.85rem !important;
        padding: 0.35rem 0.6rem !important;
    }

    /* Remove left margin/gap for the all-entries grid so it starts at left viewport edge */
    .data-query-grid {
        margin-left: 0 !important;
        padding-left: 0 !important;
        width: 100% !important;
        box-sizing: border-box;
    }

    /* Small adjustment for count labels to align with edges */
    .data-query-tab-layout span {
        padding-left: 0.5rem;
        padding-right: 0.5rem;
    }
}

/* Make preset buttons display as a two-column grid on small screens */
@media (max-width: 600px) {
    .preset-buttons {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 0.5rem;
        align-items: stretch;
    }

    /* Ensure each button stretches to fill the grid cell */
    .preset-buttons ::slotted(.preset-btn),
    .preset-buttons .preset-btn,
    .preset-buttons vaadin-button,
    .preset-buttons button {
        width: 100% !important;
        justify-self: stretch !important;
    }
}

/* Ensure preset buttons force a 2-column grid on typical mobile widths (up to 768px) */
@media (max-width: 768px) {
    .preset-buttons {
        display: grid !important;
        grid-template-columns: repeat(2, minmax(0, 1fr)) !important;
        gap: 0.5rem !important;
        align-items: stretch !important;
        /* remove the horizontal-layout flex behavior */
        -webkit-box-orient: initial !important;
        -webkit-box-direction: initial !important;
    }

    /* Make sure all direct children fill their grid cell and do not keep flex sizing */
    .preset-buttons > * {
        width: 100% !important;
        box-sizing: border-box !important;
        flex: none !important;
        -ms-flex: none !important;
        -webkit-flex: none !important;
        justify-self: stretch !important;
    }

    /* Target Vaadin button elements specifically as a fallback */
    .preset-buttons vaadin-button,
    .preset-buttons button,
    .preset-buttons .preset-btn {
        width: 100% !important;
        min-width: 0 !important;
    }
}

/* Tweak: ensure export sections use consistent spacing on very small screens
   Previously the stacked sections get large gap due to margins on each .card-like box
   and the layout's gap. We add a narrow-screen rule to reduce gap and normalize padding.
*/
@media (max-width: 576px) {
    /* Target the HorizontalLayout we added in DataExportView */
    .export-sections-layout {
        /* remove larger gap and let children use compact spacing */
        gap: 0.5rem !important;
    }

    /* When the horizontal layout wraps to vertical, its children (the section boxes)
       should not add large top/bottom margins; match desktop spacing by using symmetric
       padding instead of big margins. */
    .export-sections-layout > * {
        /* collapse extra top/bottom margins coming from Lumo utility Margin classes */
        margin-top: 0.25rem !important;
        margin-bottom: 0.25rem !important;
        padding-left: calc(var(--mobile-horizontal-padding, 0.25rem)) !important;
        padding-right: calc(var(--mobile-horizontal-padding, 0.25rem)) !important;
        box-sizing: border-box;
    }

    /* Ensure the two child columns (wrappers) do not keep large min-width that forces extra spacing */
    .export-sections-layout > * {
        min-width: 0 !important;
    }
}
