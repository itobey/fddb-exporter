/* FDDB Exporter - Modern Dark Theme */

@import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap');

html {
    /* Accent colors */
    --accent: #4e619b;
    --accent-hover: #5d72b3;
    --accent-active: #3f4e7d;
    --accent-contrast: #ffffff;

    /* Button colors */
    --button-color: #ae9357;
    --button-color-hover: #bfa979;
    --button-color-active: #a98e52;
    --button-color-contrast: #ffffff;

    /* Nutrient colors */
    --nutrient-calories: #ef5350;
    --nutrient-fat: #ffa726;
    --nutrient-carbs: #66bb6a;
    --nutrient-sugar: #ec407a;
    --nutrient-protein: #ab47bc;
    --nutrient-fibre: #26c6da;

    /* Lumo overrides */
    --lumo-primary-color: var(--accent);
    --lumo-primary-color-50pct: rgba(78, 97, 155, 0.5);
    --lumo-primary-color-10pct: rgba(78, 97, 155, 0.1);
    --lumo-primary-text-color: var(--accent-contrast);

    --lumo-base-color: #0f0f11;
    --lumo-tint-5pct: rgba(255, 255, 255, 0.03);
    --lumo-tint-10pct: rgba(255, 255, 255, 0.05);
    --lumo-tint-20pct: rgba(255, 255, 255, 0.08);
    --lumo-tint-30pct: rgba(255, 255, 255, 0.12);
    --lumo-tint-40pct: rgba(255, 255, 255, 0.16);
    --lumo-tint-50pct: rgba(255, 255, 255, 0.2);
    --lumo-tint-60pct: rgba(255, 255, 255, 0.25);
    --lumo-tint-70pct: rgba(255, 255, 255, 0.3);
    --lumo-tint-80pct: rgba(255, 255, 255, 0.4);
    --lumo-tint-90pct: rgba(255, 255, 255, 0.5);
    --lumo-tint: #ffffff;

    --lumo-contrast-5pct: rgba(255, 255, 255, 0.04);
    --lumo-contrast-10pct: rgba(255, 255, 255, 0.06);
    --lumo-contrast-20pct: rgba(255, 255, 255, 0.1);
    --lumo-contrast-30pct: rgba(255, 255, 255, 0.15);
    --lumo-contrast-40pct: rgba(255, 255, 255, 0.2);
    --lumo-contrast-50pct: rgba(255, 255, 255, 0.25);
    --lumo-contrast-60pct: rgba(255, 255, 255, 0.3);
    --lumo-contrast-70pct: rgba(255, 255, 255, 0.4);
    --lumo-contrast-80pct: rgba(255, 255, 255, 0.5);
    --lumo-contrast-90pct: rgba(255, 255, 255, 0.7);
    --lumo-contrast: #ffffff;

    --lumo-body-text-color: rgba(255, 255, 255, 0.87);
    --lumo-secondary-text-color: rgba(255, 255, 255, 0.6);
    --lumo-tertiary-text-color: rgba(255, 255, 255, 0.4);
    --lumo-disabled-text-color: rgba(255, 255, 255, 0.35);
    --lumo-header-text-color: rgba(255, 255, 255, 0.95);

    --lumo-box-shadow-xs: 0 1px 2px rgba(0, 0, 0, 0.3);
    --lumo-box-shadow-s: 0 1px 3px rgba(0, 0, 0, 0.35), 0 1px 2px rgba(0, 0, 0, 0.2);
    --lumo-box-shadow-m: 0 2px 6px rgba(0, 0, 0, 0.4), 0 1px 3px rgba(0, 0, 0, 0.25);
    --lumo-box-shadow-l: 0 4px 12px rgba(0, 0, 0, 0.45), 0 2px 6px rgba(0, 0, 0, 0.3);
    --lumo-box-shadow-xl: 0 8px 24px rgba(0, 0, 0, 0.5), 0 4px 12px rgba(0, 0, 0, 0.35);

    --lumo-border-radius-s: 4px;
    --lumo-border-radius-m: 6px;
    --lumo-border-radius-l: 8px;

    --lumo-space-xs: 4px;
    --lumo-space-s: 8px;
    --lumo-space-m: 16px;
    --lumo-space-l: 24px;
    --lumo-space-xl: 32px;

    /* Card surface */
    --card-surface: rgba(255, 255, 255, 0.06);
    --card-border: rgba(255, 255, 255, 0.1);
    --card-hover-surface: rgba(255, 255, 255, 0.08);

    /* Transitions */
    --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
    --transition-normal: 180ms cubic-bezier(0.4, 0, 0.2, 1);
    --transition-slow: 250ms cubic-bezier(0.4, 0, 0.2, 1);

    /* Mobile padding */
    --mobile-horizontal-padding: 0.5rem;
}

body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica', 'Arial', sans-serif;
    font-weight: 400;
    line-height: 1.5;
    color: var(--lumo-body-text-color);
    background-image: linear-gradient(to bottom, #3f4e7d, #414c73, #424a69, #43485f, #434655);
}

h1, h2, h3, h4, h5, h6 {
    color: var(--lumo-header-text-color);
    font-weight: 600;
    line-height: 1.3;
}

/* App Header */
.app-header {
    /*background-image: linear-gradient(to left, #5d598f, #55568b, #4e5486, #465182, #3f4e7d);*/
    background-color: #4e619b;
    border-bottom: 1px solid rgba(255, 255, 255, 0.08);
    backdrop-filter: blur(10px);
}

.app-header vaadin-drawer-toggle {
    color: var(--button-color-hover);
    transition: color var(--transition-fast), transform var(--transition-fast);
}

.app-header vaadin-drawer-toggle:hover {
    color: var(--button-color-hover);
    transform: translateY(-1px);
}

.app-header vaadin-drawer-toggle:active {
    color: var(--button-color-active);
    transform: translateY(0);
}

.app-title {
    font-size: clamp(1rem, 5vw, 1.5rem);
    font-weight: 600;
    color: var(--lumo-header-text-color);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.app-header-center {
    display: flex !important;
    flex-direction: row !important;
    align-items: center !important;
    gap: 0.6rem !important;
    flex-wrap: nowrap !important;
    justify-content: flex-start !important;
    justify-self: start !important;
    width: 100% !important;
}

.app-header-center img,
.app-header-center .fddb-app-header-icon {
    flex: 0 0 auto !important;
    display: inline-block !important;
    vertical-align: middle !important;
    width: 32px !important;
    height: 32px !important;
    margin-right: 0.6rem !important;
    object-fit: contain !important;
}

.app-header-center .app-title {
    flex: 1 1 auto !important;
    min-width: 0 !important;
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    text-align: left !important;
}

.fddb-drawer-icon {
    display: inline-block;
}

@media (min-width: 769px) {
    .fddb-drawer-icon {
        display: none !important;
    }

    .drawer-header {
        display: none !important;
        visibility: hidden !important;
        height: 0 !important;
        padding: 0 !important;
        margin: 0 !important;
    }
}

/* Drawer */
vaadin-app-layout::part(drawer) {
    background-image: linear-gradient(to right bottom, #3f4e7d, #414c73, #424a69, #43485f, #434655);
    border-right: 1px solid rgba(255, 255, 255, 0.08);
}

.drawer-header {
    padding: 0.75rem 1rem !important;
    margin-bottom: 0.5rem !important;
    border-bottom: 1px solid rgba(255, 255, 255, 0.08) !important;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.drawer-header img {
    width: 32px;
    height: 32px;
    object-fit: contain;
    margin-right: 0.5rem;
}

.drawer-header h3 {
    margin: 0;
    line-height: 1;
}

/* Side Navigation */
vaadin-side-nav-item {
    --_lumo-item-selected-background: rgba(78, 97, 155, 0.15);
    border-radius: var(--lumo-border-radius-m);
    margin: 2px 0;
    transition: background-color var(--transition-fast);
}

vaadin-side-nav-item::part(link) {
    border-radius: var(--lumo-border-radius-m);
    padding: 8px 12px;
}

vaadin-side-nav-item:hover {
    background-color: rgba(174, 147, 87, 0.4);
}

vaadin-side-nav-item::part(link):active:focus {
    background-color: rgba(174, 147, 87, 0.4);
}

vaadin-side-nav-item[selected] {
    background: var(--_lumo-item-selected-background);
    border-left: 4px solid var(--accent);
    padding-left: 8px;
}

vaadin-side-nav-item[selected]::part(link) {
    color: var(--accent-contrast);
    font-weight: 500;
}

/* Cards Grid */
.cards-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    gap: 16px;
    width: 100%;
}

/* Card Component */
.card {
    background: var(--card-surface);
    border: 1px solid var(--card-border);
    border-radius: var(--lumo-border-radius-l);
    padding: 16px;
    transition: transform var(--transition-normal), box-shadow var(--transition-normal), background-color var(--transition-fast);
    box-shadow: var(--lumo-box-shadow-xs);
    box-sizing: border-box;
}

.card:hover {
    transform: translateY(-4px);
    box-shadow: var(--lumo-box-shadow-m);
    background: var(--card-hover-surface);
}

.card--highlight {
    cursor: pointer;
}

.card--highlight:hover {
    transform: translateY(-6px);
    box-shadow: 0 6px 16px rgba(78, 97, 155, 0.3), 0 2px 8px rgba(0, 0, 0, 0.4);
}

.card--highlight .card__value {
    color: var(--accent-hover);
}

/* Buttons */
vaadin-button[theme~="primary"] {
    background: var(--button-color);
    color: var(--button-color-contrast);
    border-radius: var(--lumo-border-radius-m);
    font-weight: 500;
    transition: background-color var(--transition-fast), transform var(--transition-fast);
    box-shadow: var(--lumo-box-shadow-xs);
}

vaadin-button[theme~="primary"]:hover {
    background: var(--button-color-hover);
    transform: translateY(-1px);
    box-shadow: var(--lumo-box-shadow-s);
}

vaadin-button[theme~="primary"]:active {
    background: var(--button-color-active);
    transform: translateY(0);
    box-shadow: none;
}

vaadin-button {
    border-radius: var(--lumo-border-radius-m);
    transition: all var(--transition-fast);
}

/* Date Badges */
.date-badge {
    display: inline-block;
    padding: 4px 10px;
    border-radius: 12px;
    background: rgba(78, 97, 155, 0.12);
    color: var(--lumo-body-text-color);
    font-size: 0.75rem;
    font-weight: 500;
    letter-spacing: 0.3px;
}

.label-small {
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    font-weight: 600;
    color: var(--lumo-secondary-text-color);
}

/* Form Elements */
vaadin-text-field::part(input-field),
vaadin-text-area::part(input-field),
vaadin-date-picker::part(input-field),
vaadin-integer-field::part(input-field) {
    background: rgba(255, 255, 255, 0.04);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: var(--lumo-border-radius-m);
    transition: border-color var(--transition-fast), background-color var(--transition-fast);
}

vaadin-text-field:hover::part(input-field),
vaadin-text-area:hover::part(input-field),
vaadin-date-picker:hover::part(input-field),
vaadin-integer-field:hover::part(input-field) {
    background: rgba(255, 255, 255, 0.06);
    border-color: rgba(255, 255, 255, 0.15);
}

vaadin-text-field[focused]::part(input-field),
vaadin-text-area[focused]::part(input-field),
vaadin-date-picker[focused]::part(input-field),
vaadin-integer-field[focused]::part(input-field) {
    border-color: var(--accent);
    background: rgba(255, 255, 255, 0.08);
    box-shadow: 0 0 0 2px rgba(78, 97, 155, 0.2);
}

/* Notifications */
vaadin-notification-card {
    display: inline-flex;
    align-items: center;
    width: auto !important;
    max-width: min(90vw, 640px);
    box-sizing: border-box;
    border-radius: var(--lumo-border-radius-l);
    box-shadow: none !important;
}

vaadin-notification-card[theme~="success"] {
    background: rgba(76, 175, 80, 0.15);
}

vaadin-notification-card[theme~="error"] {
    background: rgba(244, 67, 54, 0.15);
}

vaadin-notification-card[theme~="warning"] {
    background: rgba(255, 152, 0, 0.15);
}

/* Charts */
.chart-container {
    background: var(--card-surface);
    border: 1px solid var(--card-border);
    border-radius: var(--lumo-border-radius-l);
    padding: 20px;
    box-shadow: var(--lumo-box-shadow-xs);
}

/* Grid */
vaadin-grid {
    border-radius: var(--lumo-border-radius-l);
    overflow: hidden;
    box-shadow: var(--lumo-box-shadow-s);
    border: none;
}

vaadin-grid::part(header-cell) {
    background: var(--accent);
    color: white;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    font-size: 0.875rem;
}

vaadin-grid::part(row) {
    transition: background var(--transition-fast);
}

vaadin-grid::part(row):hover {
    background: var(--lumo-primary-color-10pct);
}

/* Tabs */
vaadin-tab {
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    transition: all var(--transition-fast);
}

vaadin-tab[selected] {
    color: var(--lumo-primary-text-color);
    border-bottom: 2px solid var(--lumo-primary-text-color);
}

/* Nutrient-specific colors */
.nutrient-calories {
    color: var(--nutrient-calories);
}

.nutrient-fat {
    color: var(--nutrient-fat);
}

.nutrient-carbs {
    color: var(--nutrient-carbs);
}

.nutrient-sugar {
    color: var(--nutrient-sugar);
}

.nutrient-protein {
    color: var(--nutrient-protein);
}

.nutrient-fibre {
    color: var(--nutrient-fibre);
}

/* Utility Classes */
.text-accent {
    color: var(--accent) !important;
}

.bg-accent {
    background-color: var(--accent) !important;
}

.bg-accent-subtle {
    background-color: rgba(78, 97, 155, 0.12) !important;
}

.border-accent {
    border-color: var(--accent) !important;
}

.surface-elevated {
    background: rgba(255, 255, 255, 0.08);
    border: 1px solid rgba(255, 255, 255, 0.12);
}

/* Scrollbar */
::-webkit-scrollbar {
    width: 10px;
    height: 10px;
}

::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.03);
}

::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.15);
    border-radius: 5px;
}

::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.25);
}

/* Animations */
@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.fade-in-up {
    animation: fadeInUp var(--transition-slow);
}

/* Responsive breakpoints */
@media (max-width: 600px) {
    .cards-grid {
        grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
        gap: 12px;
    }
}

@media (max-width: 768px) {
    :root {
        --mobile-horizontal-padding: 0.5rem;
    }

    .card, .cards-grid, .cards-container {
        padding-left: var(--mobile-horizontal-padding);
        padding-right: var(--mobile-horizontal-padding);
        box-sizing: border-box;
        max-width: 100vw;
        max-height: none !important;
        min-height: 120px;
    }

    vaadin-vertical-layout:not([theme~="padding-false"]) {
        padding-left: max(var(--mobile-horizontal-padding), env(safe-area-inset-left, 0)) !important;
        padding-right: max(var(--mobile-horizontal-padding), env(safe-area-inset-right, 0)) !important;
        padding-top: max(0.5rem, env(safe-area-inset-top, 0.5rem)) !important;
        padding-bottom: max(0.5rem, env(safe-area-inset-bottom, 0.5rem)) !important;
    }

    h2, h3 {
        padding-left: 0.25rem;
        padding-right: 0.25rem;
    }
}

@media (max-width: 576px) {
    :root {
        --mobile-horizontal-padding: 0.25rem;
    }

    .dashboard-view,
    .data-query-view,
    .rolling-averages-view,
    .data-export-view,
    .correlation-view,
    .migration-view {
        padding: var(--mobile-horizontal-padding) !important;
    }

    vaadin-horizontal-layout {
        flex-direction: column !important;
    }

    vaadin-horizontal-layout.amount-date-row {
        flex-direction: row !important;
        flex-wrap: nowrap !important;
        justify-content: flex-start !important;
        align-items: center !important;
        white-space: nowrap !important;
    }

    vaadin-button {
        width: 100%;
        margin: 0.25rem 0;
    }

    [class*="card"] {
        min-width: 100px !important;
        font-size: 0.875rem;
    }

    vaadin-grid::part(cell) {
        font-size: 0.75rem;
        padding: 0.25rem;
    }

    vaadin-button,
    vaadin-tab,
    a {
        min-height: 44px;
        min-width: 44px;
    }
}

@media (min-width: 1200px) {
    .cards-grid {
        gap: 20px;
    }
}

/* Accessibility */
@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }

    .card:hover,
    .card--highlight:hover,
    vaadin-button:hover {
        transform: none !important;
    }
}
